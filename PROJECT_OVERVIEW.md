# 專案總覽

## 📌 專案目標

將YouTube影片中的硬編碼字幕轉換成可翻頁閱讀的電子書格式，讓使用者能夠：
- 一次看到多行連續字幕
- 快速閱讀文字內容
- 不需要盯著影片下方的單行字幕區域

## 🎯 核心概念

傳統看法：
```
[影片播放] → 字幕一行一行出現 → 需要不斷閱讀底部
```

我們的方法：
```
[截取N秒字幕] → 組合成一頁 → 全螢幕顯示 → 翻頁+播放音訊
```

## 📁 檔案結構

```
youtube-subtitle-book/
│
├── manifest.json           # Chrome擴充功能配置
│   └── 定義權限、版本、content scripts等
│
├── popup.html             # 控制面板UI
│   └── 提供參數設定介面
│
├── popup.js               # 控制面板邏輯
│   └── 處理使用者輸入，發送訊息到content script
│
├── content.js             # 🔥 核心功能
│   ├── startCapture()      → 截圖主流程
│   ├── createPages()       → 組合頁面
│   └── openViewer()        → 開啟閱讀器
│
├── content.css            # 閱讀器樣式
│   └── 全螢幕閱讀器的視覺設計
│
├── icon*.png              # 擴充功能圖示
│
├── create-icons.html      # 圖示產生工具
│
├── README.md              # 完整說明文件
├── QUICK_START.md         # 快速開始指南
└── TEST_CHECKLIST.md      # 測試檢查清單
```

## 🔧 技術架構

### 1. 截圖機制（content.js）

```javascript
核心流程：
for (每個時間點) {
  1. video.currentTime = 目標時間
  2. 等待影片載入該時間點
  3. 使用Canvas API截取字幕區域
  4. 將截圖轉為Base64儲存
}
```

**關鍵技術**：
- `HTMLVideoElement.currentTime` - 影片時間控制
- `Canvas.drawImage()` - 截取影片畫面特定區域
- `canvas.toDataURL()` - 轉換為PNG格式

### 2. 資料結構

```javascript
captureData = {
  videoTitle: "影片標題",
  videoDuration: 600,  // 秒
  screenshots: [
    { time: 0, imageData: "data:image/png;base64,..." },
    { time: 2, imageData: "data:image/png;base64,..." },
    ...
  ],
  pages: [
    {
      pageNumber: 1,
      startTime: 0,
      endTime: 10,
      screenshots: [...5張截圖...]
    },
    ...
  ]
}
```

### 3. 閱讀器（openViewer）

動態建立全螢幕覆蓋層：
```javascript
- 黑色背景遮罩（z-index: 999999）
- 顯示標題、頁數
- 垂直排列多行字幕截圖
- 翻頁按鈕控制
- 音訊同步播放
```

## 🎨 UI/UX設計原則

### Popup介面
- **簡潔**：只顯示必要參數
- **清晰**：每個選項都有說明
- **回饋**：進度條和狀態訊息

### 閱讀器介面
- **專注**：深色背景減少干擾
- **舒適**：適當間距和字體大小
- **直覺**：明顯的導航按鈕

## 💡 創新點

1. **無需OCR**：直接截圖，避免文字辨識的複雜性和不準確性
2. **音訊同步**：每一頁都能播放對應的影片音訊
3. **彈性配置**：可調整截圖間隔、每頁行數等參數
4. **全螢幕閱讀**：類似電子書的閱讀體驗

## ⚡ 效能考量

### 記憶體使用
```
單張截圖（1920x108 PNG）≈ 80KB
10分鐘影片（間隔2秒）= 300張 ≈ 24MB
30分鐘影片（間隔2秒）= 900張 ≈ 72MB
```

### 處理時間
```
截圖速度 ≈ 1-2張/秒（取決於影片載入速度）
10分鐘影片 ≈ 5-10分鐘處理時間
```

### 優化策略
- 使用較大的截圖間隔（減少截圖數量）
- 調整Canvas尺寸（減少單張檔案大小）
- 未來可加入字幕去重（跳過重複內容）

## 🚀 未來擴展方向

### 階段2：智慧功能
- [ ] 字幕變化偵測（智慧分頁）
- [ ] 去重演算法（跳過相同字幕）
- [ ] OCR輔助（提取文字供搜尋）

### 階段3：匯出功能
- [ ] PDF匯出
- [ ] 純文字匯出（OCR後）
- [ ] 影片片段下載

### 階段4：閱讀體驗
- [ ] 書籤系統
- [ ] 閱讀進度記憶
- [ ] 筆記功能
- [ ] 字體大小調整

### 階段5：分享功能
- [ ] 匯出成獨立HTML檔案
- [ ] 雲端儲存整合
- [ ] 多裝置同步

## 🔍 已知限制

1. **字幕類型限制**
   - ✅ 硬編碼字幕（burned-in subtitles）
   - ❌ YouTube CC字幕（需要另外處理）

2. **效能限制**
   - 長影片需要較長處理時間
   - 大量截圖佔用記憶體

3. **相容性**
   - 目前僅支援Chrome瀏覽器
   - 需要Manifest V3支援

4. **使用限制**
   - 需手動調整字幕區域位置
   - 無法自動偵測字幕出現位置

## 🧪 測試策略

### 單元測試（未來）
- 截圖功能測試
- 頁面組合邏輯測試
- 時間計算準確性測試

### 整合測試
- 完整流程測試（見TEST_CHECKLIST.md）
- 不同影片類型測試
- 邊界情況測試

### 使用者測試
- 不同使用情境
- 易用性測試
- 效能測試

## 📊 成功指標

原型驗證成功的標準：
- ✅ 能夠成功截取字幕區域
- ✅ 組合成可閱讀的頁面
- ✅ 全螢幕閱讀器正常運作
- ✅ 音訊同步播放功能正常
- ✅ 處理時間在可接受範圍內

## 🤝 貢獻指南

如果要擴展此專案：

1. **Fork專案**
2. **建立功能分支**：`git checkout -b feature/新功能`
3. **提交變更**：`git commit -m "新增：XXX功能"`
4. **推送分支**：`git push origin feature/新功能`
5. **建立Pull Request**

## 📝 版本歷史

### v0.1.0（當前版本）- 原型
- ✅ 基本截圖功能
- ✅ 頁面組合功能
- ✅ 全螢幕閱讀器
- ✅ 音訊同步播放

### v0.2.0（計劃中）
- [ ] 字幕去重
- [ ] 智慧分頁
- [ ] 效能優化

### v1.0.0（未來）
- [ ] 完整的錯誤處理
- [ ] 使用者設定持久化
- [ ] 多語言支援

## 📞 支援

遇到問題？
1. 查看README.md的疑難排解章節
2. 檢查TEST_CHECKLIST.md確認功能正常
3. 開啟開發者工具（F12）查看錯誤訊息

## 📄 授權

MIT License - 自由使用、修改、分發
