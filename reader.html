<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <title>即時閱讀器</title>
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="reader.css">
</head>

<body>
    <!-- Toast / Save Status -->
    <div class="toast-container" id="toastContainer">
        <!-- Dynamic toasts will be added here -->
    </div>
    <div id="saveStatus" style="display:none;"></div> <!-- Legacy ID support, maybe hidden -->

    <div class="header">
        <div class="title" id="videoTitle">載入中...</div>

        <div class="page-info">
            <button id="prevPage" class="adj-btn" style="color:var(--text-secondary)">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z" />
                </svg>
            </button>
            <input type="number" id="pageJumpInput" min="1" value="1">
            <span>/</span>
            <span class="total" id="totalPages">-</span>
            <button id="nextPage" class="adj-btn" style="color:var(--text-secondary)">
                <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                    <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z" />
                </svg>
            </button>
        </div>

        <div class="status" id="captureStatus" style="font-size:12px; color:var(--text-secondary)">擷取中...</div>
    </div>

    <div class="main-container">
        <div class="content" id="pageContent">
            <div class="loading">等待頁面資料...</div>
        </div>
    </div>

    <!-- Floating Control Bar -->
    <div class="floating-controls" id="floatingControls">
        <!-- Play / Pause -->
        <button id="playAudio" class="ctrl-btn" title="播放/暫停">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                <path d="M8 5v14l11-7z" />
            </svg>
        </button>

        <div class="divider"></div>

        <!-- Mute -->
        <button id="toggleMute" class="ctrl-btn" title="靜音開關">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path
                    d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
            </svg>
        </button>

        <!-- Speed (Using Select for logic compatibility, styled minimal) -->
        <div style="position: relative; display: flex; align-items: center; width: 44px; height: 44px;">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"
                style="position: absolute; left: 12px; pointer-events: none; color: var(--text-secondary);">
                <path
                    d="M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z" />
            </svg>
            <select id="playbackSpeed"
                style="appearance: none; background: transparent; border: none; color: transparent; width: 44px; height: 44px; cursor: pointer; position: relative; z-index: 2;">
                <option value="1">1x</option>
                <option value="1.25">1.25x</option>
                <option value="1.5">1.5x</option>
                <option value="2">2x</option>
            </select>
        </div>

        <!-- Open YouTube -->
        <button id="openYouTube" class="ctrl-btn" title="開啟 YouTube">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path
                    d="M10 15l5.19-3L10 9v6zm11.56-7.83c.13.47.22 1.1.28 1.9.07.8.1 1.49.1 2.09L22 12c0 2.19-.16 3.8-.44 4.83-.25.9-.83 1.48-1.73 1.73-.47.13-1.33.22-2.65.28-1.3.07-2.49.1-3.59.1L12 19c-4.19 0-6.8-.16-7.83-.44-.9-.25-1.48-.83-1.73-1.73-.13-.47-.22-1.1-.28-1.9-.07-.8-.1-1.49-.1-2.09L2 12c0-2.19.16-3.8.44-4.83.25-.9.83-1.48 1.73-1.73.47-.13 1.33-.22 2.65-.28 1.3-.07 2.49-.1 3.59-.1L12 5c4.19 0 6.8.16 7.83.44.9.25 1.48.83 1.73 1.73z" />
            </svg>
        </button>

        <div class="divider"></div>

        <!-- Batch Mode Toggle -->
        <button id="toggleBatchMode" class="ctrl-btn" title="批次刪除">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path
                    d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z" />
            </svg>
        </button>
    </div>

    <!-- Batch Actions Bar (Hidden by default) -->
    <div class="floating-controls hidden" id="batchControls"
        style="background: var(--surface-color); border: 1px solid var(--primary-color);">
        <span style="font-size: 13px; color: var(--text-primary); margin-right: 10px;">已選取項目</span>
        <button id="confirmBatchDelete" class="adj-btn"
            style="background: var(--danger-color); padding: 6px 12px; border-radius: 16px;">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="white" style="margin-right:4px">
                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z" />
            </svg>
            刪除
        </button>
        <button id="cancelBatchMode" class="ctrl-btn" title="取消">
            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                <path
                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
            </svg>
        </button>
    </div>

    <!-- Messages -->
    <span class="waiting hidden" id="waitingMsg">等待...</span>

    <script src="reader.js"></script>
</body>

</html>