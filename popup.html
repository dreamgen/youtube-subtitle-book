<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <style>
    body {
      width: 300px;
      padding: 15px;
      font-family: Arial, sans-serif;
    }

    h3 {
      margin-top: 0;
      color: #333;
    }

    .section {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-size: 12px;
      color: #666;
    }

    input,
    select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
    }

    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 4px;
      background: linear-gradient(to right, #4CAF50, #ff9800);
      outline: none;
      padding: 0;
      margin: 8px 0;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #fff;
      border: 2px solid #4CAF50;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      background: #f0f0f0;
    }

    .slider-value {
      display: inline-block;
      background: #4CAF50;
      color: white;
      padding: 2px 8px;
      border-radius: 4px;
      font-weight: bold;
      font-size: 13px;
    }

    button {
      width: 100%;
      padding: 10px;
      background: #ff0000;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
    }

    button:hover {
      background: #cc0000;
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    button#previewButton {
      background: #4CAF50;
      margin-top: 5px;
    }

    button#previewButton:hover {
      background: #45a049;
    }

    .status {
      margin-top: 10px;
      padding: 10px;
      background: #f0f0f0;
      border-radius: 4px;
      font-size: 12px;
      display: none;
    }

    .status.show {
      display: block;
    }

    .progress {
      margin-top: 10px;
      height: 20px;
      background: #f0f0f0;
      border-radius: 10px;
      overflow: hidden;
      display: none;
    }

    .progress.show {
      display: block;
    }

    .progress-bar {
      height: 100%;
      background: #4CAF50;
      transition: width 0.3s;
    }

    .saved-section {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #ddd;
    }

    .saved-section label {
      color: #333;
      font-weight: bold;
    }

    .saved-section select {
      margin-bottom: 5px;
    }

    .btn-group {
      display: flex;
      gap: 5px;
    }

    .btn-group button {
      flex: 1;
      margin-top: 5px;
    }

    button#loadResult {
      background: #2196F3;
    }

    button#loadResult:hover {
      background: #1976D2;
    }

    button#deleteResult {
      background: #ff4444;
    }

    button#deleteResult:hover {
      background: #cc0000;
    }

    .export-section {
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid #ddd;
    }

    .export-section label {
      color: #333;
      font-weight: bold;
      display: block;
      margin-bottom: 8px;
    }

    .checkbox-list {
      max-height: 120px;
      overflow-y: auto;
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 5px;
      margin-bottom: 8px;
      background: #fafafa;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      padding: 4px;
      border-radius: 3px;
    }

    .checkbox-item:hover {
      background: #f0f0f0;
    }

    .checkbox-item input {
      width: auto;
      margin-right: 8px;
    }

    .checkbox-item span {
      font-size: 12px;
      color: #333;
    }

    button#exportPdf {
      background: #9C27B0;
    }

    button#exportPdf:hover {
      background: #7B1FA2;
    }

    button#selectAll {
      background: #607D8B;
      font-size: 12px;
      padding: 6px;
    }

    /* è‡ªè¨‚ç¢ºèªå°è©±æ¡† */
    .confirm-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .confirm-overlay.show {
      display: flex;
    }

    .confirm-dialog {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      max-width: 260px;
      text-align: center;
    }

    .confirm-dialog p {
      margin: 0 0 15px 0;
      font-size: 14px;
      color: #333;
    }

    .confirm-dialog .btn-group {
      display: flex;
      gap: 10px;
    }

    .confirm-dialog button {
      flex: 1;
      margin: 0;
      padding: 8px;
    }

    .confirm-dialog button.confirm-yes {
      background: #ff4444;
    }

    .confirm-dialog button.confirm-no {
      background: #999;
    }
  </style>
</head>

<body>
  <h3>å­—å¹•é›»å­æ›¸è£½ä½œå™¨</h3>

  <div class="section">
    <label>é–‹å§‹æ™‚é–“</label>
    <select id="startTimeOption">
      <option value="beginning">å¾é ­é–‹å§‹</option>
      <option value="current" selected>å¾ç•¶å‰æ™‚é–“</option>
    </select>
  </div>

  <div class="section">
    <label>æ“·å–æ¨¡å¼</label>
    <select id="captureMode">
      <option value="interval" selected>å›ºå®šé–“éš”</option>
      <option value="smart">ğŸ¤– æ™ºæ…§æ“·å–ï¼ˆåµæ¸¬å­—å¹•è®ŠåŒ–ï¼‰</option>
    </select>
  </div>

  <!-- å›ºå®šé–“éš”æ¨¡å¼è¨­å®š -->
  <div class="section interval-options" id="intervalOptions">
    <label>æˆªåœ–é–“éš”: <span id="intervalValue" class="slider-value">2.0 ç§’</span></label>
    <input type="range" id="captureInterval" min="1" max="10" step="0.1" value="2">
  </div>

  <!-- æ™ºæ…§æ“·å–æ¨¡å¼è¨­å®š -->
  <div class="section smart-options" id="smartOptions" style="display:none;">
    <label>æª¢æ¸¬é »ç‡</label>
    <select id="checkInterval">
      <option value="100">é«˜ï¼ˆæ¯ 0.1 ç§’ï¼‰- è¼ƒè€—è³‡æº</option>
      <option value="200" selected>ä¸­ï¼ˆæ¯ 0.2 ç§’ï¼‰- æ¨è–¦</option>
      <option value="300">ä½ï¼ˆæ¯ 0.3 ç§’ï¼‰- è¼ƒçœè³‡æº</option>
    </select>
    <label style="margin-top: 10px;">è®ŠåŒ–æ•æ„Ÿåº¦: <span id="sensitivityValue" class="slider-value">30%</span></label>
    <input type="range" id="sensitivity" min="2" max="50" step="1" value="30">
    <div style="font-size: 11px; color: #888; margin-top: 5px;">
      è¼ƒä½ = æ›´æ•æ„Ÿï¼ˆè¼ƒå¤šæˆªåœ–ï¼‰ï½œè¼ƒé«˜ = åªæ•æ‰æ˜é¡¯è®ŠåŒ–
    </div>
    <label style="margin-top: 10px;">å­—å¹•é¡è‰²</label>
    <select id="subtitleColor">
      <option value="white" selected>ç™½è‰²å­—å¹•</option>
      <option value="yellow">é»ƒè‰²å­—å¹•</option>
      <option value="any">ä»»æ„é¡è‰²ï¼ˆä¸éæ¿¾ç©ºç™½ï¼‰</option>
    </select>
    <div style="font-size: 11px; color: #888; margin-top: 5px;">
      æ ¹æ“šå­—å¹•é¡è‰²éæ¿¾ç©ºç™½ç•«é¢
    </div>
    <label style="margin-top: 10px;">å­—å¹•åƒç´ æ¯”ä¾‹é–¾å€¼: <span id="minPixelValue" class="slider-value">0.5%</span></label>
    <input type="range" id="minPixelPercent" min="0.1" max="5" step="0.1" value="0.5">
    <div style="font-size: 11px; color: #888; margin-top: 5px;">
      å­—å¹•åƒç´ ä½”æ¯”éœ€è¶…éæ­¤å€¼æ‰è¦–ç‚ºæœ‰å­—å¹•ï¼Œèª¿é«˜å¯éæ¿¾æ›´å¤šç©ºç™½
    </div>
  </div>

  <div class="section">
    <label>æ¯é é¡¯ç¤ºè¡Œæ•¸</label>
    <select id="linesPerPage">
      <option value="3">3è¡Œ</option>
      <option value="5" selected>5è¡Œ</option>
      <option value="7">7è¡Œ</option>
      <option value="10">10è¡Œ</option>
      <option value="15">15è¡Œ</option>
      <option value="20">20è¡Œ</option>
    </select>
  </div>

  <div class="section">
    <label>è£½ä½œé æ•¸</label>
    <select id="totalPages">
      <option value="all" selected>å…¨éƒ¨ï¼ˆåˆ°å½±ç‰‡çµå°¾ï¼‰</option>
      <option value="5">5é </option>
      <option value="10">10é </option>
      <option value="20">20é </option>
      <option value="30">30é </option>
      <option value="50">50é </option>
    </select>
  </div>

  <div class="section">
    <label>å­—å¹•å€åŸŸé«˜åº¦ï¼ˆå½±ç‰‡é«˜åº¦çš„ç™¾åˆ†æ¯”ï¼‰</label>
    <input type="number" id="subtitleHeight" value="15" min="5" max="30">
  </div>

  <div class="section">
    <label>ä¸‹æ–¹é‚Šç•Œï¼ˆå½±ç‰‡é«˜åº¦çš„ç™¾åˆ†æ¯”ï¼Œé¿å…æˆªåˆ°é€²åº¦æ¢ï¼‰</label>
    <input type="number" id="bottomMargin" value="0" min="0" max="20">
  </div>

  <button id="previewButton">ğŸ” é è¦½è¨­å®šæ•ˆæœ</button>
  <button id="startCapture">é–‹å§‹è£½ä½œé›»å­æ›¸</button>
  <button id="openViewer" style="display: none;">é–‹å•Ÿé–±è®€å™¨</button>
  <button id="liveReader" style="display: none; background: #9C27B0;">ğŸ“– å³æ™‚é–±è®€</button>

  <div class="saved-section" id="savedSection">
    <label>ğŸ“ å·²å„²å­˜çš„æ®µè½</label>
    <select id="savedResults">
      <option value="">ï¼ˆå°šç„¡å·²å„²å­˜çš„æ®µè½ï¼‰</option>
    </select>
    <div class="btn-group">
      <button id="loadResult">è¼‰å…¥</button>
      <button id="deleteResult">åˆªé™¤</button>
    </div>
  </div>

  <div class="progress" id="progress">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <div class="status" id="status"></div>

  <div class="export-section" id="exportSection">
    <label>ğŸ“„ åŒ¯å‡º PDF</label>
    <div class="checkbox-list" id="exportCheckboxes">
      <div class="checkbox-item" style="color: #999; font-style: italic;">
        <span>ï¼ˆè¼‰å…¥ä¸­...ï¼‰</span>
      </div>
    </div>
    <div class="btn-group">
      <button id="selectAll">å…¨é¸</button>
      <button id="exportPdf">åŒ¯å‡º PDF</button>
    </div>
  </div>

  <!-- è‡ªè¨‚ç¢ºèªå°è©±æ¡† -->
  <div class="confirm-overlay" id="confirmOverlay">
    <div class="confirm-dialog">
      <p id="confirmMessage">ç¢ºå®šè¦åˆªé™¤é€™å€‹æ®µè½å—ï¼Ÿ</p>
      <div class="btn-group">
        <button class="confirm-no" id="confirmNo">å–æ¶ˆ</button>
        <button class="confirm-yes" id="confirmYes">ç¢ºå®šåˆªé™¤</button>
      </div>
    </div>
  </div>

  <script src="jspdf.umd.min.js"></script>
  <script src="popup.js"></script>
</body>

</html>